<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="wheelSpinner">
        <p>Test 1</p>
        <p>Test 2</p>
        <p>Test 3</p>
        <p>Test 4</p>
        <p>Test 5</p>
        <p>Test 6</p>
        <p>Test 7</p>
        <p>Test 8</p>
        <p>Test 9</p>
        <p>Test 10</p>
    </div>
    <script>
        let color = ['AliceBlue', 'AntiqueWhite', 'Aqua', 'Aquamarine', 'Azure', 'Beige', 'Bisque', 'BlueViolet', 'HotPink', 'DeepPink']

        class WheelSpinner{
            id = null;
            options = null;

            contentTotal = null;

            constructor(id, options) {
                if (id == null) return console.error("[WheelSpinner.js] missing 'id' parameter.");
                if (options == null) return console.error("[WheelSpinner.js] missing 'options' parameter.");

                this.id = id;
                this.options = options;

                this.validation();
                this.injectStyle();
                this.drawContent();
            }

            validation() {
                if (this.options['size'] == null) return console.error("[WheelSpinner.js] 'options' parameter missing 'size' property.");
            }

            injectStyle() {
                let head = document.getElementsByTagName('head')[0];
                let style = document.createElement('style');

                style.innerHTML = ` #${this.id} {
                                        border: 1px solid blue;
                                        border-radius: 50%;
                                        overflow: hidden;
                                        position: relative;
                                        height: ${this.options['size']}px;
                                        width: ${this.options['size']}px;
                                    }

                                    #${this.id} * {
                                        display: flex;
                                        justify-content: center;
                                        align-items: center;
                                        position: absolute;
                                        top: 0px;
                                        left: 0px;
                                        height: ${this.options['size']/2}px;
                                        width: ${this.options['size']}px;
                                    }
                                    
                                    `;
                head.appendChild(style);
            }

            drawContent() {
                let element = document.getElementById(this.id);
                let contentElements = [].slice.call(element.children);

                this.contentTotal = contentElements.length;

                if (this.contentTotal < 1) return;

                element.innerHTML = '';
                for (let i = 0; i < this.contentTotal; i++) {
                    let content = document.createElement("div");

                    var degrees = 360/this.contentTotal;
                    var tangent = Math.tan((degrees /2) * Math.PI / 180)
                    var base = (2 * (this.options['size']/2)) * tangent;
                    var length = (this.options['size'] - base) / 10;

                    let head = document.getElementsByTagName('head')[0];
                    let style = document.createElement('style');

                    style.innerHTML = ` #${this.id}>:nth-child(${i+1}) {
                                            clip-path: polygon(50% 100%, ${100 - length}% 0, ${(length)}% 0);
                                            transform: rotate(${(360/this.contentTotal) * (i+1)}deg);
                                            transform-origin: 50% 100%;
                                            background-color: ${color[i]};
                                        }
                                        `;
                    head.appendChild(style);
                    content.appendChild(contentElements[i]);
                    content.firstChild.style.transform = `translateY(-50px) rotate(${360 - ((360/this.contentTotal) * (i+1))}deg) `;
                    element.appendChild(content);
                }

            }

            spin(value) {
            }
        }

        let options = {
            audio: false,
            background: {
                color: null,
                image: null,
            },
            border: {
                color: null,
                size: 2,
            },
            size: 500,
        }

        let wheelSpinner = new WheelSpinner('wheelSpinner', options);

        wheelSpinner.spin();
    </script>
</body>
</html>